<!DOCTYPE html>
<html>
  <head>
    <title>HighFleet Intercept Course Calculator</title>
    <link rel="stylesheet" href="static/styles.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Barlow:wght@500;900&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
    />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta property="og:title" content="HighFleet Intercept Course Calculator" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://interceptcourse.app/" />
    <meta
      property="og:description"
      content="A calculator that will give you the best optimal intercept course to the target"
    />
    <meta
      property="og:image"
      content="https://interceptcourse.app/static/images/og_image.png"
    />
  </head>
  <body>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <div class="container">
      <img src="static/images/logo.png" alt="Intercept Calculator" />
      <div class="form-container">
        <div class="form-wrapper">
          <form id="myForm">
            <h2>Enter Data:</h2>
            <!-- Your form fields go here -->
            <div class="speed-or-time">
              <div class="input-wrapper">
                <i class="fa-solid fa-gauge"></i>
                <label for="speed_self"
                  >Your Detachment's Max Speed (km/h):</label
                >
              </div>
              <input
                type="number"
                id="speed_self"
                name="speed_self"
                placeholder="e.g. 256"
                step="1"
              />

              <div class="divider-container">
                <hr class="divider-line" />
                <div class="divider-text">AND / OR</div>
                <hr class="divider-line" />
              </div>

              <div class="input-wrapper">
                <i class="fa-solid fa-clock"></i>
                <label for="desired_time"
                  >Desired Time to intercept (hr):</label
                >
              </div>
              <input
                type="number"
                id="desired_time"
                name="desired_time"
                placeholder="e.g. 10"
                step="0.1"
              />
            </div>

            <div class="input-wrapper">
              <i class="fa-solid fa-gauge"></i>
              <label for="speed_target">Target's Speed (km/h):</label>
            </div>
            <input
              type="number"
              id="speed_target"
              name="speed_target"
              placeholder="e.g. 110"
              required
              step="1"
            />

            <div class="input-wrapper">
              <i class="fa-solid fa-compass"></i>
              <label for="direction_target_from_you"
                >Direction towards Target (°):</label
              >
            </div>
            <input
              type="number"
              id="direction_target_from_you"
              name="direction_target_from_you"
              placeholder="e.g. 137"
              required
              step="1"
            />

            <div class="input-wrapper">
              <i class="fa-solid fa-compass"></i>
              <label for="direction_target_heading"
                >Target's Heading (°):</label
              >
            </div>
            <input
              type="number"
              id="direction_target_heading"
              name="direction_target_heading"
              placeholder="e.g. 59"
              required
              step="1"
            />

            <div class="input-wrapper">
              <i class="fa-solid fa-ruler"></i>
              <label for="distance_target">Distance to target (km):</label>
            </div>
            <input
              type="number"
              id="distance_target"
              name="distance_target"
              placeholder="875"
              required
              step="1"
            />

            <div class="buttons">
              <button type="submit" class="submit-button">Run</button>
              <button type="reset" id="resetButton" class="clear-button">
                Clear
              </button>
            </div>
          </form>
        </div>
        <div class="results-wrapper">
          <h2>Results:</h2>
          <div id="resultsContainer"></div>
        </div>
      </div>
      <div class="desc">
        <div class="tabs">
          <button class="tablink" onclick="openTab('howToUse')">
            How to Use
          </button>
          <button class="tablink" onclick="openTab('mathContainer')">
            Math Details
          </button>
        </div>
        <div id="howToUse" class="content tab-content">
          <h2>
            <i class="fas fa-lightbulb"></i> How to use
            <i class="fas fa-lightbulb"></i>
          </h2>

          <p>Greetings, brave Tarkhan.</p>
          <p>
            It seems you've decoded a radio message and you're not sure what to
            do?
          </p>
          <p>
            You know the target's <strong>location</strong> relative to your
            position, their <strong>heading</strong>, and their
            <strong>speed</strong>, correct? That's all we need to
            <strong>INTERCEPT!</strong>
          </p>
          <ol>
            <li>
              Put in your detachment's max speed and/or the desired time to
              intercept. At least one of these is required.
            </li>
            <li>Put the target's speed. This is required.</li>
            <li>
              Put the direction on your compass the target is located. Use the
              ruler and click on your position then move the mouse over the
              target's position to recieve this number. This is required.
            </li>
            <li>
              Put in the target's current heading. If this information is
              unknown to you but you know what city they are heading to next,
              click on their position with the ruler and move over the next city
              on their destination to get this number. This is required.
            </li>
            <li>
              Put in the distance to the target from your current position. Use
              the ruler to obtain this number. This is required.
            </li>
            <li>
              Click <strong>RUN</strong> to calculate the intercept course. Use
              these results to set your detachment on an intercept course with
              the target. Be aware that if your intercept point is past the
              target's next destination this will not work. Also, the calculator
              will know if intercept is possible and will alert you if not.
            </li>
          </ol>
        </div>
        <div id="mathContainer" class="content tab-content">
          <div class="math">
            <h2>
              <i class="fa-solid fa-calculator"></i> Math Details
              <i class="fa-solid fa-calculator"></i>
            </h2>

            <h3>1. Intercept Course Calculation:</h3>

            <p>
              The intercept course is calculated by considering both your
              bearing to the target and the target's heading. By combining
              these, we can determine the optimal heading to intercept the
              target.
            </p>

            <pre>
<code>
  Intercept Course = atan2((targetSpeed * sin(targetHeading)) + (maxSpeed * sin(targetBearing)), 
                           (targetSpeed * cos(targetHeading)) + (maxSpeed * cos(targetBearing)))
</code>
</pre>

            <p>
              If we are considering the "Desired Time to Intercept", then the
              target will have moved by the time we get there. We take this into
              account and calculate the intercept course to the target's
              predicted future position, rather than its current position:
            </p>

            <pre>
<code>
  newTargetX = (targetDistance * cos(targetBearing)) + (targetSpeed * desiredTimeToIntercept * cos(targetHeading))
  newTargetY = (targetDistance * sin(targetBearing)) + (targetSpeed * desiredTimeToIntercept * sin(targetHeading))
  Intercept Course = atan2(newTargetY, newTargetX)
</code>
</pre>

            <h3>2. Time to Intercept Calculation:</h3>

            <p>
              This is calculated by taking the distance to the target and
              dividing it by the speed at which you are closing that distance
              (the closing speed).
            </p>

            <pre>
<code>
  Time to Intercept = targetDistance / closingSpeed
</code>
</pre>

            <h3>3. Distance to Intercept Calculation:</h3>

            <p>
              If a desired time to intercept is not provided, this is simply the
              distance you would travel given your max speed and the time to
              intercept:
            </p>

            <pre>
<code>
  Distance to Intercept = maxSpeed * timeToIntercept
</code>
</pre>

            <p>
              If a desired time to intercept is provided, this is the distance
              to the new predicted position of the target:
            </p>

            <pre>
<code>
  Distance to Intercept = sqrt(newTargetX^2 + newTargetY^2)
</code>
</pre>

            <h3>4. Required Speed Calculation:</h3>

            <p>
              If a desired time to intercept is provided, this is the speed
              required to reach the target in the desired time:
            </p>

            <pre>
<code>
  Required Speed = Distance to Intercept / desiredTimeToIntercept
</code>
</pre>

            <p>
              If a desired time is not provided, the required speed is
              essentially your maximum speed, because you're assumed to be
              travelling at max speed to intercept the target as quickly as
              possible. The actual speed at which you intercept the target is a
              result of your speed and course, and the target's speed and
              course:
            </p>

            <pre>
<code>
  Required Speed = Distance to Intercept / timeToIntercept
</code>
</pre>

            <p>
              Please note that trigonometric functions (sin, cos, atan2) in
              these formulas work with radians, not degrees. We have used helper
              functions in the JavaScript code to convert between degrees and
              radians where needed.
            </p>
          </div>
        </div>
      </div>
    </div>

    <footer>
      <div class="footer-container">
        <div class="footer-links">
          <a
            href="https://github.com/frazierzak/Intercept-Calculator"
            target="_blank"
            >Source</a
          >
          <a href="mailto:zakfrazier@gmail.com">Email</a>
          <a
            href="https://store.steampowered.com/app/1434950/HighFleet/"
            target="_blank"
            >Steam</a
          >
        </div>
        <p>&copy; 2023 Zak Frazier. All rights reserved.</p>
      </div>
    </footer>

    <script src="static/script.js"></script>
    <script>
      function openTab(tabName) {
        $('.tab-content').hide() // Hide all tab content.
        $('#' + tabName).fadeIn() // Show the specific tab content with fade in effect.
      }
    </script>
  </body>
</html>
